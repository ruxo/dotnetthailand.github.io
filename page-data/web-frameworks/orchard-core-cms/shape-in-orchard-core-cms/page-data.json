{"componentChunkName":"component---src-templates-docs-js","path":"/web-frameworks/orchard-core-cms/shape-in-orchard-core-cms","result":{"data":{"site":{"siteMetadata":{"title":".NET Thailand","docsLocation":"https://github.com/dotnetthailand/dotnetthailand.github.io","docsRepo":"dotnetthailand/dotnetthailand.github.io","docsLocationType":"github","editable":true,"contentRootPath":"content","siteUrl":"https://www.dotnetthailand.com"}},"mdx":{"fields":{"id":"c784e852-cfeb-5d36-a5f9-b2353cba41ff","title":"Shape in Orchard Core CMS","slug":"/web-frameworks/orchard-core-cms/shape-in-orchard-core-cms"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Shape in Orchard Core CMS\",\n  \"showMetadata\": true,\n  \"editable\": true,\n  \"showToc\": true,\n  \"order\": 2\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"What is a shape?\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"A Shape is an object that holds some data, like a view model, and also some metadata about how to render it.\\nAny class that implements IShape is a shape.\\nShapes are used to as a way to render some html, and to do so you need to call the IDisplayHelper.DisplayAsync(shape) that returns Task\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<IHmlContent>\"), \".\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"When calling this method you don't need to specify a template, it will trigger an event to allow any component in the system to chose what template is best suited to render this specific shape.\\nThis is why a shape can be rendered using a cshtml file, a liquid file, some template from the database, some code, ... it's completely extensible, but from your point of view you just ask it to be rendered.\\nThis is an advantage over Views in MVC where when return a ViewResult from an action the template is strongly associated with the action.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"This indirection is very useful for theming, such that templates can come from different modules, or any module can redefine what template to use for a shape.\\nSo as a developer you can provide one default template with your shape that represents a Menu, but allow any other module or theme to redefine it.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Then to allow for better granularity in ways to select a template, the shape has a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Metadata.Alternates\"), \" property that contains which templates names are better suited for this shape, in order of priority.\\nLike a shape representing an Article, which is a Content item, could accept template for an with a specific name, or a template for any article, or a template for any content item.\\nThis allows the themes to be able to customize the templates for very specific instances of shapes, or group of shapes.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"When working in the decoupled CMS mode, you are removing theming altogether, and not using shapes at all, because you implement each view and route handler, and don't expect anything else to be able to override these.\\nBut most modules that expose front-end views need to use shapes in order to allow a theme to customizes parts of the system without having to re-implement all handlers and views.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"Content from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/OrchardCMS/OrchardCore/issues/4121#issuecomment-539608731\"\n  }, \"GitHub Discussion\"), \" & credit to S\\xE9bastien Ros\")), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Dynamically create a shape in a view\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In any cshtml page, create a new shape with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"New\"), \" property which holding a ShapeFactory reference.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Display a shape with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"DisplayAsync\"), \".\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\"\n  }, \"@* Views/Home/Index.cshtml *@\\n@{\\n  // Create a shape\\n  var shape = await New.Foo(Message: \\\"Hello World\\\");\\n}\\n\\n@* Display a shape *@\\n<h1>\\n  @await DisplayAsync(shape)\\n</h1>\\n\\n\")), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The shape \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Foo\"), \" will use \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Foo.cshtml\"), \" as a template and pass Model with Message property to it.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You can create any shape to match your requirement, e.g. \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"header\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"branding\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Then we can access \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Model.Message\"), \" in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Foo.cshtml\"), \".\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\"\n  }, \"@* Foo.cshtml *@\\n\\n<span>@Model.Message</span>\\n\\n\"))), mdx(\"section\", null, mdx(\"h2\", {\n    parentName: \"section\"\n  }, \"File structure\"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"tree Views\\nViews\\n\\u251C\\u2500\\u2500 Foo.cshtml\\n\\u2514\\u2500\\u2500 Home\\n    \\u2514\\u2500\\u2500 Index.cshtml\\n\\n\"))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Create a shape without ViewModel in DisplayDriver class\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"We usually use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DisplayDriverBase.Initialize<TModel>\"), \" to create a ShapeResult for a content part.\\nHowever, this method requires a view model which sometime we don't need it.\"), mdx(\"p\", {\n    parentName: \"section\"\n  }, \"We can use other methods to create ShapeResult. For example:\"), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cs\"\n  }, \"var shapeResult = Dynamic(nameof(FooPart)).Location(\\\"Detail\\\", \\\"Content\\\");\\n\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cs\"\n  }, \"return Factory(\\n    nameof(FooPart),\\n    async context => await context.New.FooPart()\\n).Location(\\\"Detail\\\", \\\"Content\\\");\\n\"))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Useful code reference\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore.Modules/OrchardCore.Demo/ContentElementDisplays/TestContentElementDisplayDriver.cs\"\n  }, \"https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore.Modules/OrchardCore.Demo/ContentElementDisplays/TestContentElementDisplayDriver.cs\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore/OrchardCore.DisplayManagement/Views/ShapeResult.cs\"\n  }, \"https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore/OrchardCore.DisplayManagement/Views/ShapeResult.cs\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore/OrchardCore.DisplayManagement/Implementation/DefaultShapeFactory.cs\"\n  }, \"https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore/OrchardCore.DisplayManagement/Implementation/DefaultShapeFactory.cs\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore/OrchardCore.DisplayManagement/Handlers/DisplayDriverBase.cs\"\n  }, \"https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore/OrchardCore.DisplayManagement/Handlers/DisplayDriverBase.cs\")))));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#what-is-a-shape","title":"What is a shape?"},{"url":"#dynamically-create-a-shape-in-a-view","title":"Dynamically create a shape in a view","items":[{"url":"#file-structure","title":"File structure"}]},{"url":"#create-a-shape-without-viewmodel-in-displaydriver-class","title":"Create a shape without ViewModel in DisplayDriver class"},{"url":"#useful-code-reference","title":"Useful code reference"}]},"timeToRead":2,"parent":{"__typename":"File","relativePath":"web-frameworks/orchard-core-cms/shape-in-orchard-core-cms.md"},"frontmatter":{"metaTitle":null,"showMetadata":true,"editable":true,"showPreviousNext":null,"showToc":true}},"gitBranch":{"name":"main"},"gitCommit":{"hash":"d8cc45e74ec87b664a5c7f2ad7a707af6edac455","date":"2021-09-20 03:20"}},"pageContext":{"id":"c784e852-cfeb-5d36-a5f9-b2353cba41ff"}},"staticQueryHashes":["12478684","12478684","1306071104","2353585426","2353585426","2552263575","2552263575","2882937274","2882937274","353167761","353167761","3812332637","3812332637","4285724809"]}