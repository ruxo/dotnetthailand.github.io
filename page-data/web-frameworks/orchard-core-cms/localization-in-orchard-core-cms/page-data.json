{"componentChunkName":"component---src-templates-docs-js","path":"/web-frameworks/orchard-core-cms/localization-in-orchard-core-cms","result":{"data":{"site":{"siteMetadata":{"title":".NET Thailand","docsLocation":"https://github.com/dotnetthailand/dotnetthailand.github.io","docsRepo":"dotnetthailand/dotnetthailand.github.io","docsLocationType":"github","editable":true,"contentRootPath":"content","siteUrl":"https://www.dotnetthailand.com"}},"mdx":{"fields":{"id":"5303ff6b-361c-5c98-be70-07a242f6eef8","title":"Localization in Orchard Core CMS","slug":"/web-frameworks/orchard-core-cms/localization-in-orchard-core-cms"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Localization in Orchard Core CMS\",\n  \"showMetadata\": true,\n  \"editable\": true,\n  \"showToc\": true,\n  \"order\": 2\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Prerequisite\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"To learn localization in Orchard Core CMS, we will use an existing example from \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/web-frameworks/orchard-core-cms/create-a-custom-orchard-core-cms-theme\"\n  }, \"Create a custom Orchard Core CMS theme content\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Here is the current project structure.\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ tree -I 'bin|obj|App_Data|Localization|wwwroot' orchard-example\\norchard-example\\n\\u2514\\u2500\\u2500 src\\n    \\u251C\\u2500\\u2500 Orchard.Web\\n    \\u2502   \\u251C\\u2500\\u2500 NLog.config\\n    \\u2502   \\u251C\\u2500\\u2500 Orchard.Web.csproj\\n    \\u2502   \\u251C\\u2500\\u2500 Program.cs\\n    \\u2502   \\u251C\\u2500\\u2500 Properties\\n    \\u2502   \\u2502   \\u2514\\u2500\\u2500 launchSettings.json\\n    \\u2502   \\u251C\\u2500\\u2500 Startup.cs\\n    \\u2502   \\u2514\\u2500\\u2500 appsettings.json\\n    \\u2514\\u2500\\u2500 Themes\\n        \\u2514\\u2500\\u2500 Orchard.Theme\\n            \\u251C\\u2500\\u2500 Manifest.cs\\n            \\u251C\\u2500\\u2500 Orchard.Theme.csproj\\n            \\u2514\\u2500\\u2500 Views\\n                \\u251C\\u2500\\u2500 Layout.cshtml\\n                \\u2514\\u2500\\u2500 _ViewImports.cshtml\\n\")), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Please note that you can use localization in both custom theme and module.\"))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Create a PO file\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Orchard Core CMS uses PO (portable object) file to store translation data.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We can create a PO file in multiple locations which are module, theme, tenant, App_Data and the root of the main project.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.orchardcore.net/en/dev/docs/reference/modules/Localize/#po-files-locations\"\n  }, \"Learn more about OP file locations\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In this example, we will create a PO file in the root folder of the main project with a file path \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/Localization/[CultureName].po\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Culture name is \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"<language-code>-<country-code/region-code>\"), \" pattern e.g. \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"th-TH\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"en-US\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/localization?view=aspnetcore-5.0#globalization-and-localization-terms-2\"\n  }, \"Learn more about globalization and localization terms\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Let's create a PO file \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/src/Orchard.Web/Localization/th-TH.po\"), \" in Orchard.Web folder.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Here is the file structure after adding \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"th-TH.po\"), \" file.\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ tree -I 'bin|obj|wwwroot' orchard-example\\norchard-example\\n\\u2514\\u2500\\u2500 src\\n    \\u251C\\u2500\\u2500 Orchard.Web\\n    \\u2502   \\u251C\\u2500\\u2500 App_Data\\n    \\u2502   \\u251C\\u2500\\u2500 Localization\\n    \\u2502   \\u2502   \\u2514\\u2500\\u2500 th-TH.po\\n    \\u2502   \\u251C\\u2500\\u2500 NLog.config\\n    \\u2502   \\u251C\\u2500\\u2500 Orchard.Web.csproj\\n    \\u2502   \\u251C\\u2500\\u2500 Program.cs\\n    \\u2502   \\u251C\\u2500\\u2500 Properties\\n    \\u2502   \\u2502   \\u2514\\u2500\\u2500 launchSettings.json\\n    \\u2502   \\u251C\\u2500\\u2500 Startup.cs\\n    \\u2502   \\u2514\\u2500\\u2500 appsettings.json\\n    \\u2514\\u2500\\u2500 Themes\\n        \\u2514\\u2500\\u2500 Orchard.Theme\\n            \\u251C\\u2500\\u2500 Manifest.cs\\n            \\u251C\\u2500\\u2500 Orchard.Theme.csproj\\n            \\u2514\\u2500\\u2500 Views\\n                \\u251C\\u2500\\u2500 Layout.cshtml\\n                \\u2514\\u2500\\u2500 _ViewImports.cshtml\\n\")), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add some translation data to \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"th-TH.po\"), \" file.\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"msgid \\\"Copyright\\\"\\nmsgstr \\\"\\u0E2A\\u0E07\\u0E27\\u0E19\\u0E25\\u0E34\\u0E02\\u0E2A\\u0E34\\u0E17\\u0E18\\u0E34\\u0E4C\\\"\\n\"))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Use a translation file\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"We can use this translation in a view (*.cshtml) by using T property and pass msgid.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Edit Layout.cshtml an put the following code at the bottom.\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\"\n  }, \"  @T[\\\"Copyright\\\"]\\n\")), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"In addition, to use it in C# code, e.g. service, controller, driver, handler, etc. Inject \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"IStringLocalizer\"), \" and use an instance as:\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cs\"\n  }, \"namespace Orchard.Module\\n{\\n    public class HomeController : Controller {\\n\\n        private readonly IStringLocalizer S;\\n\\n        public HomeController(IStringLocalizer<HomeController> localizer) => S = localizer;\\n\\n        public ActionResult Index() => View(S[\\\"Copyright\\\"]));\\n    }\\n}\\n\"))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Add supported cultures\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enable localization module. Go to admin panel > Configuration > Features > Search for \\\"localization\\\" and enable it.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add supported cultures and set a default culture.\", mdx(\"ol\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click Configuration.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click Localization.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click Culture.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Select \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"th-TH\"), \" culture in a select list and click \\\"Add culture\\\". Do the same thing to add \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"en-US\"), \" culture.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Set \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"th-TH\"), \" as a default culture.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Click \\\"Save\\\".\")))), mdx(\"p\", {\n    parentName: \"section\"\n  }, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1035px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/3fda468e8982b1bb7309562b03746bc2/8740f/localization-configuration.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"44.01544401544401%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABpklEQVQoz22R226bQBCGef+qN73JTfsGUY9IcZWLKKrUiyQKrpHrI7Fi4wPEGEhYdoHd/Tu74LRpO9Kn2Vlm/p0ZnMl0itVqhe12a4njGLP5DEEQQMoGSkko2aHkc2y+/Q/HCIZhiN1uhyiKcTgkqPIh2MMV6qxvqTKv9alnqfMf0OWI+Nl5gpnzBM54MsGKBE1nRnS/36N42uMpj1E8PpCP8JhFNq54hlrkFtUU0JK9AIrDmc3nCNfrZ8EkSXBIMxSM03hA0yg0UtE4GlJppGmOJMtR1RJakwZhPeXWlEsdTrHZbBBHEXa0QyMouCABU6D/QZGCLLlVaGNSIis5x/xuAcfz+hjRHoPbWyx8H2vqsqlr6C7xaKbYtNLQOQ2W0BWHPt6TcSGwuF/C8QcD9Ac+xuTHwyHul0sIUYERBWNgrLTwSgASGPmXeHX9GifeCVjN2sfwu3vn/ScXH09Pcfn2Hc7cL/j2/Qpveg2CQUiZTbc/2Y5GRYIXyHiK3PwY3U6huvGNOR8+u+i5Li7Oevh6fo6b6xvkjAqL0r79Yuy/4qP9KfgLuBmqHDwESkYAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"localization configuration\",\n    \"title\": \"localization configuration\",\n    \"src\": \"/static/3fda468e8982b1bb7309562b03746bc2/e3189/localization-configuration.png\",\n    \"srcSet\": [\"/static/3fda468e8982b1bb7309562b03746bc2/a2ead/localization-configuration.png 259w\", \"/static/3fda468e8982b1bb7309562b03746bc2/6b9fd/localization-configuration.png 518w\", \"/static/3fda468e8982b1bb7309562b03746bc2/e3189/localization-configuration.png 1035w\", \"/static/3fda468e8982b1bb7309562b03746bc2/8740f/localization-configuration.png 1106w\"],\n    \"sizes\": \"(max-width: 1035px) 100vw, 1035px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \"))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Test localization\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Go back to frontend homepage. Append query string \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"?culture=th-TH\"), \" to an address in a browser and enter to reload the page.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You should find \\\"Copyright\\\" is displayed as \\\"\\u0E2A\\u0E07\\u0E27\\u0E19\\u0E25\\u0E34\\u0E02\\u0E2A\\u0E34\\u0E17\\u0E18\\u0E34\\u0E4C\\\".\"))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Setting a default culture does not take an effect.\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"This is because ASP.NET localization determines a culture by checking a culture value in these areas starting from:\", mdx(\"ol\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"a query string which is \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"&culture=culture-name\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"a cookie\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Accept-Language HTTP header\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"the DefaultRequestCulture property of the RequestLocalizationOptions class\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"a thread culture\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Orchard Core set a default culture as a DefaultRequestCulture property of the RequestLocalizationOptions class. \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/OrchardCMS/OrchardCore/blob/main/src/OrchardCore.Modules/OrchardCore.Localization/Startup.cs#L49\"\n  }, \"OrchardCore.Localization/Startup.cs\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If we don't have a culture value in query string or a cookie, a culture will be always a value of Accept-Language and not a default culture that we set in an admin panel.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"To make a culture get resolved to a a default value in an admin panel, we need to adjust an order of how ASP.NET determine a culture by putting the following code in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"Start.cs\"), \" of a custom module, theme or main project.\")), mdx(\"pre\", {\n    parentName: \"section\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cs\"\n  }, \"// Startup.cs\\n...\\npublic override void ConfigureServices(IServiceCollection services)\\n{\\n    services.Configure<RequestLocalizationOptions>(options =>\\n    {\\n        options.RequestCultureProviders.Clear(); // Clears all the default culture providers from the list\\n        options.RequestCultureProviders.Add(new QueryStringRequestCultureProvider());\\n        options.RequestCultureProviders.Add(new CookieRequestCultureProvider());\\n        // Later, the default culture value value will be set in\\n        // https://github.com/OrchardCMS/OrchardCore/blob/dev/src/OrchardCore.Modules/OrchardCore.Localization/Startup.cs#L45\\n    });\\n...\\n\"))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Useful Orchard localization documents\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.orchardcore.net/en/dev/docs/reference/modules/Localize/\"\n  }, \"https://docs.orchardcore.net/en/dev/docs/reference/modules/Localize/\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.orchardcore.net/en/dev/docs/guides/install-localization-files/#configuring-the-supported-cultures\"\n  }, \"https://docs.orchardcore.net/en/dev/docs/guides/install-localization-files/#configuring-the-supported-cultures\")))), mdx(\"section\", null, mdx(\"h1\", {\n    parentName: \"section\"\n  }, \"Useful basic knowledge of localization in ASP.NET:\"), mdx(\"ul\", {\n    parentName: \"section\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.jerriepelser.com/blog/how-aspnet5-determines-culture-info-for-localization/\"\n  }, \"https://www.jerriepelser.com/blog/how-aspnet5-determines-culture-info-for-localization/\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.codemag.com/Article/2009081/A-Deep-Dive-into-ASP.NET-Core-Localization\"\n  }, \"https://www.codemag.com/Article/2009081/A-Deep-Dive-into-ASP.NET-Core-Localization\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://ml-software.ch/posts/writing-a-custom-request-culture-provider-in-asp-net-core-2-1\"\n  }, \"https://ml-software.ch/posts/writing-a-custom-request-culture-provider-in-asp-net-core-2-1\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/localization?view=aspnetcore-5.0\"\n  }, \"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/localization?view=aspnetcore-5.0\")))));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#prerequisite","title":"Prerequisite"},{"url":"#create-a-po-file","title":"Create a PO file"},{"url":"#use-a-translation-file","title":"Use a translation file"},{"url":"#add-supported-cultures","title":"Add supported cultures"},{"url":"#test-localization","title":"Test localization"},{"url":"#setting-a-default-culture-does-not-take-an-effect","title":"Setting a default culture does not take an effect."},{"url":"#useful-orchard-localization-documents","title":"Useful Orchard localization documents"},{"url":"#useful-basic-knowledge-of-localization-in-aspnet","title":"Useful basic knowledge of localization in ASP.NET:"}]},"timeToRead":2,"parent":{"__typename":"File","relativePath":"web-frameworks/orchard-core-cms/localization-in-orchard-core-cms.md"},"frontmatter":{"metaTitle":null,"showMetadata":true,"editable":true,"showPreviousNext":null,"showToc":true}},"gitBranch":{"name":"main"},"gitCommit":{"hash":"d8cc45e74ec87b664a5c7f2ad7a707af6edac455","date":"2021-09-20 03:20"}},"pageContext":{"id":"5303ff6b-361c-5c98-be70-07a242f6eef8"}},"staticQueryHashes":["12478684","12478684","1306071104","2353585426","2353585426","2552263575","2552263575","2882937274","2882937274","353167761","353167761","3812332637","3812332637","4285724809"]}